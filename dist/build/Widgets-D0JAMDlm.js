import{b_ as I,a as h,j as e,a7 as N,e as f,b as S,V as F,W,X as B,Y as P,Z as x,$ as j,a0 as A,T as p,a1 as z,I as O,a3 as U,g as q,r as G,b$ as H,k as b}from"./strapi-Pbtr2TNT.js";import{W as d}from"./WidgetHelpers-DH_a7gET.js";const V=I.enhanceEndpoints({addTagTypes:["RecentDocumentList"]}).injectEndpoints({overrideExisting:!0,endpoints:s=>({getRecentDocuments:s.query({query:n=>`/content-manager/homepage/recent-documents?action=${n.action}`,transformResponse:n=>n.data,providesTags:(n,i,{action:l})=>[{type:"RecentDocumentList",id:l}]})})}),{useGetRecentDocumentsQuery:$}=V,k=b(p)`
  display: block;
  max-width: 14.4rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,D=({documents:s})=>{const{formatMessage:n}=h(),{trackUsage:i}=S(),l=F(),r=t=>{const c=t.kind==="singleType",m=c?"single-types":"collection-types",y=t.locale?`?plugins[i18n][locale]=${t.locale}`:"";return`/content-manager/${m}/${t.contentTypeUid}${c?"":"/"+t.documentId}${y}`},u=t=>()=>{i("willEditEntryFromHome");const c=r(t);l(c)};return e.jsx(W,{colCount:5,rowCount:s?.length??0,children:e.jsx(B,{children:s?.map(t=>e.jsxs(P,{onClick:u(t),cursor:"pointer",children:[e.jsx(x,{children:e.jsx(k,{title:t.title,variant:"omega",textColor:"neutral800",children:t.title})}),e.jsx(x,{children:e.jsx(k,{variant:"omega",textColor:"neutral600",children:t.kind==="singleType"?n({id:"content-manager.widget.last-edited.single-type",defaultMessage:"Single-Type"}):n({id:t.contentTypeDisplayName,defaultMessage:t.contentTypeDisplayName})})}),e.jsx(x,{children:e.jsx(j,{display:"inline-block",children:t.status?e.jsx(A,{status:t.status}):e.jsx(p,{textColor:"neutral600","aria-hidden":!0,children:"-"})})}),e.jsx(x,{children:e.jsx(p,{textColor:"neutral600",children:e.jsx(z,{timestamp:new Date(t.updatedAt)})})}),e.jsx(x,{onClick:c=>c.stopPropagation(),children:e.jsx(j,{display:"inline-block",children:e.jsx(O,{tag:U,to:r(t),onClick:()=>i("willEditEntryFromHome"),label:n({id:"content-manager.actions.edit.label",defaultMessage:"Edit"}),variant:"ghost",children:e.jsx(q,{})})})})]},t.documentId))})})},Z=()=>{const{formatMessage:s}=h(),{data:n,isLoading:i,error:l}=$({action:"update"});return i?e.jsx(d.Loading,{}):l||!n?e.jsx(d.Error,{}):n.length===0?e.jsx(d.NoData,{children:s({id:"content-manager.widget.last-edited.no-data",defaultMessage:"No edited entries"})}):e.jsx(D,{documents:n})},J=()=>{const{formatMessage:s}=h(),{data:n,isLoading:i,error:l}=$({action:"publish"});return i?e.jsx(d.Loading,{}):l||!n?e.jsx(d.Error,{}):n.length===0?e.jsx(d.NoData,{children:s({id:"content-manager.widget.last-published.no-data",defaultMessage:"No published entries"})}):e.jsx(D,{documents:n})},o=80,T=10,w=2*Math.PI*(o-T/2),K=b.circle`
  stroke: ${({theme:s,$arcColor:n})=>s.colors[n]};
`,v=b.tspan`
  text-transform: lowercase;
  fill: ${({theme:s,$textColor:n})=>s.colors[n]};
`,Q=b(f)`
  width: 100%;

  ${({theme:s})=>s.breakpoints.small} {
    width: auto;
  }
`,X=({data:s})=>{const{locale:n}=h(),{formatMessage:i}=h(),l=s.reduce((a,g)=>a+g.count,0),[r,u]=G.useState({visible:!1,x:0,y:0,value:null});let t=0;const c=(a,g)=>{u({visible:!0,x:a.clientX,y:a.clientY,value:g})},m=()=>{u(a=>({...a,visible:!1}))},y=(a,g)=>{u({visible:!0,x:a.currentTarget.getBoundingClientRect().width/2+a.currentTarget.getBoundingClientRect().left,y:a.currentTarget.getBoundingClientRect().height+a.currentTarget.getBoundingClientRect().top,value:g})};return e.jsxs(f,{direction:"column",gap:6,margin:"auto",children:[e.jsxs("svg",{width:o*2,height:o*2,viewBox:`0 0 ${o*2} ${o*2}`,style:{position:"relative",zIndex:1},children:[e.jsx("g",{transform:`rotate(-90 ${o} ${o})`,children:s.map(a=>{const g=a.count/l*100,M=g/100*w,E=`${M} ${w-M}`,R=w*(1-t/100),L=e.jsx(K,{cx:o,cy:o,r:o-T/2,fill:"none",strokeWidth:T,strokeDasharray:E,strokeDashoffset:R,style:{transition:"stroke-dashoffset 0.3s",cursor:"pointer"},tabIndex:0,"aria-describedby":r.visible?"chart-tooltip":void 0,onFocus:C=>y(C,a),onBlur:m,onMouseMove:C=>c(C,a),onMouseLeave:m,$arcColor:a.color},a.label);return t+=g,L})}),e.jsxs("text",{x:o,y:o,textAnchor:"middle",fontSize:"2.4rem",fontWeight:"bold",children:[e.jsx(v,{x:o,dy:"0",$textColor:"neutral800",children:new Intl.NumberFormat(n,{notation:"compact",maximumFractionDigits:1}).format(l)}),e.jsx(v,{x:o,dy:"1.4em",fontSize:"1.4rem",fontWeight:"normal",$textColor:"neutral600",children:i({id:"content-manager.widget.chart-entries.title",defaultMessage:"entries"})})]})]}),r.visible&&r.value&&e.jsx(H,{style:{position:"fixed",left:16,top:16,zIndex:2,transform:`translate(${r.x}px, ${r.y}px)`},"data-testid":"entries-chart-tooltip",children:e.jsx(j,{background:"neutral900",padding:2,borderRadius:1,textAlign:"center",role:"tooltip","aria-live":"polite",children:e.jsx(p,{textColor:"neutral0",children:i({id:"content-manager.widget.chart-entries.tooltip",defaultMessage:"{count} items"},{count:r.value.count,label:r.value.label})})})}),e.jsx(f,{gap:4,wrap:"wrap",children:s.map(a=>a.count>0&&e.jsxs(Q,{gap:1,children:[e.jsx(j,{background:a.color,padding:2,borderRadius:1}),e.jsx(p,{variant:"pi",children:a.label})]},a.label))})]})},ee=()=>{const{formatMessage:s}=h(),{data:n,isLoading:i,error:l}=N();if(i)return e.jsx(d.Loading,{});if(l)return e.jsx(d.Error,{});const{draft:r,published:u,modified:t}=n??{draft:0,published:0,modified:0};return r+u+t?e.jsx(f,{minHeight:"100%",children:e.jsx(X,{data:[{label:s({id:"content-manager.containers.List.draft",defaultMessage:"Draft"}),count:r,color:"secondary500"},{label:s({id:"content-manager.containers.List.modified",defaultMessage:"Modified"}),count:t,color:"alternative500"},{label:s({id:"content-manager.containers.List.published",defaultMessage:"Published"}),count:u,color:"success500"}]})}):e.jsx(d.NoData,{children:s({id:"content-manager.widget.last-published.no-data",defaultMessage:"No published entries"})})};export{ee as ChartEntriesWidget,Z as LastEditedWidget,J as LastPublishedWidget};
